# Vly 原型图设计文档

> 最后更新: 2026-02-06

## 页面列表

| # | 页面 | 原型文件 | 状态 |
|---|------|----------|------|
| 1 | 主页面 | 原生实现 | ✅ 已确认 |
| 2 | 空状态页 | 原生实现 | ✅ 已确认 |
| 3 | 播放列表 | `playlist.html` | ✅ 已确认 |
| 4 | 设置页面 | `settings.html` | ⏳ 暂定 |

---

## 1. 主页面

**状态:** ✅ 已确认  
**实现:** `ContentView.swift`

```
┌─────────────────────────────────┐
│ 🔊 ───  ◀    ▶▶    ▶    ☰  ⚙ │  ← 第一行
├─────────────────────────────────┤
│ 0:00 ─────────────────────── 12:34 │  ← 第二行
└─────────────────────────────────┘
```

**尺寸:**
- 控制栏: 265px × 58px
- 播放按钮: 32px（突出）
- 前进/后退: 18px
- 音量滑块: 39px
- 工具按钮: 18px
- 圆角: 12px

**窗口配置:**
- 隐藏系统标题栏（使用 `.windowStyle(.hiddenTitleBar)`）
- 纯黑背景
- 控制栏悬浮在底部

---

## 2. 空状态页

**状态:** ✅ 已确认  
**实现:** `ContentView.swift`

```
┌─────────────────────────────────┐
│                                 │
│             🎬                  │
│                                 │
│            Vly                  │
│      选择文件或拖放视频          │
│                                 │
│       [ 选择文件 ]              │
│                                 │
└─────────────────────────────────┘
```

---

## 3. 播放列表

**状态:** ✅ 已确认  
**原型:** `docs/prototypes/playlist.html`

```
┌─────────────────────────────────┐
│ 播放列表                    [✕] │
├─────────────────────────────────┤
│ 🎬 视频文件 1.mp4        ⋮⋮   │
│    12:34                        │
│                                 │
│ 🎬 另一个视频文件 2.mkv   ⋮⋮   │
│    45:21                        │
│                                 │
├─────────────────────────────────┤
│ [添加文件]    [清空列表]         │
└─────────────────────────────────┘
```

**选项:**
- 位置: 右侧边栏 / 左侧边栏 / 底部弹窗 / 中央弹窗
- 宽度: 250-500px（默认 320px）

---

## 4. 设置页面

**状态:** ⏳ 暂定  
**原型:** `docs/prototypes/settings.html`

```
┌────┬─────────────────────────────────┐
│ 📺 │ 设置                         V1.0 │
│ 🎵 ├─────────────────────────────────┤
│ 📝 │ 播放                           │
│ 🎨 │ ┌ 记住进度        [开关]       │
│ 🔒 │ └ 自动播放        [开关]       │
│    │                                 │
│    │ 音频                           │
│    │ ┌ 启动音量    ───────── 80%    │
│    │ └ 静音启动    [开关]           │
└────┴─────────────────────────────────┘
```

**分类标签页:**
- 播放 / 音频 / 字幕 / 界面 / 隐私

---

## ⚠️ 窗口标题栏开发备注

### 当前配置（macOS）

**文件:** `Sources/App/VlyApp.swift`
```swift
@main
struct VlyApp: App {
    var body: some Scene {
        WindowGroup {
            ContentView()
        }
        .windowStyle(.hiddenTitleBar)  // 隐藏系统标题栏
    }
}
```

### 如何修改窗口样式

#### 1. 隐藏系统标题栏
```swift
.windowStyle(.hiddenTitleBar)
```

#### 2. 自定义标题栏
如果需要显示标题栏，有两种方式：

**方式 A: 使用系统标题栏**
```swift
.windowStyle(.titleBar)  // 默认
```

**方式 B: 完全自定义标题栏**
1. 添加 `.windowStyle(.hiddenTitleBar)` 隐藏系统标题栏
2. 在 `ContentView` 顶部添加自定义视图
3. 使用 `edgesIgnoringSafeArea(.top)` 扩展到顶部

#### 3. 窗口背景色
在 `ContentView` 的最外层 ZStack 中添加:
```swift
.background(Color.black)
```

#### 4. 常见问题

| 问题 | 解决方案 |
|------|----------|
| 隐藏标题栏后窗口变大 | 检查是否有 `CustomTitleBar` 视图被意外添加 |
| 系统标题栏还在 | 确认 `VlyApp.swift` 中有 `.windowStyle(.hiddenTitleBar)` |
| 两个标题栏重叠 | 移除 `ContentView` 中的自定义标题栏视图 |

---

## 原型文件

```
docs/prototypes/
├── playlist.html      ← 播放列表
├── settings.html      ← 设置页面
├── prototype_v1.html  ← 历史版本
├── prototype_v2.html  ← 历史版本
├── prototype_v3.html  ← 历史版本
├── prototype_v4.html  ← 历史版本
└── prototype_v5.html  ← 历史版本（控制栏最终版）
```

---

## 工作流程

1. 设计阶段 → 原型图确认
2. 开发阶段 → 代码实现
3. 测试阶段 → 功能验证
4. 提交阶段 → 文档同步
